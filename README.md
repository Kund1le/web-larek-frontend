# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```


# Компоненты проекта
## Базовые компоненты
### api.ts
Описывает взаимодействие с сервером. 
Класс **Api** Содержит:

* **get** - получение данных с сервера;
* **post** - отправка данных на сервер

### components.ts
Создание компонентов пользовательского интерфейса

класс **Component** содержит:

* **toggleClass** - смена класса;
* **setText** - заполнение текстом;
* **setDisabled** - смена статуса;
* **setHidden** - скрыть элемент;
* **setVisible** - показать элемент;
* **setImage** - установить изображение с его описанием;
* **render** - возвращает корневой DOM-элемент

### events.ts
Классическая реализация брокера событий
Класс **EventEmitter** содержит:

* **on** - устанавливает слушатель;
* **off** - снимает слушатель;
* **emit** - вызывает событие с данными;
* **onAll** - обрабатывает все события;
* **trigger** - генерирует событие при вызове

### model.ts
Гарда для проверки на модель
Абстрактный класс **Model** используется для возможности отличить базовую модель от простых объектов с данными. Содержит:
* **emitChanges** - сообщает всем о том, что модель поменялось

## Общие компоненты
### Basket.ts
Отрисовка содержимого корзины
Класс **Basket** содержит:

* **set items** - установливает элементы корзины;
* **set total** - устанавливает общую стоимость товаров;
* **set selected** - контролирует состояние кнопки оформления заказа;
* **updateBasketData** - обновляет индексы карточек при удалении;
* **toggleButton** - переключатель состояния кнопки

### Form.ts
Описание функционала управления формами. Отображает формы и их валидацию.
Класс **From** содержит:

* **onInputChange** - обрабатывает события форм;
* **set valid** - управляет состоянием кнопки в зависимости от прошедших валидации данных;
* **set errors** - отображает ошибки;
* **render** - отрисовывает состояние форм

### Modal.ts
Отрисовка модального окна, его открытие, закрытие и показ контента в окне.
Класс **Modal** содержит:

* **set content** - устанавливает содержимое;
* **open** - открывает окно;
* **close** - закрывает окно;
* **render** - отрисовывает окно

## Дополнительные компоненты
### AppData.ts
Содержит данные всего проекта, логику работы с ними. Включает каталог, корзину, данные для заказа и ошибки валидации.
Класс **CardItem** хранит информацию карточки товара
Класс **AppState** содержит:

* **removeCard** - удаляет карточку из корзины;
* **clearOrder** - очищает данные заказа;
* **clearBasket** - очищает содержимое корзины;
* **resetBasket** - сбрасывает корзину;
* **setCatalog** - устанавливает каталог товаров;
* **setOrderData** - устанавливает данные о товаре для заказа;
* **set count** - счетчик количества товаров;
* **addCardBasket** - добавляет товар в корзину;
* **removeCardBasket** - удаляет товар из корзины;
* **setOrderField** - устанавливает и проверяет значение в корзине;
* **validateOrder** - проверяет данные в формах заказа

### Contacts.ts
Управление контактными данными в формах заказа
Класс **Contacts** содержит:

* **set email** - устанавливает адрес электронной почты;
* **set phone** - устанавливает номер телефона

### LarekApi.ts
Предоставляет обмен данными с сервером
Класс **LаrekApi** содержит:

* **getCardItem** - получает данные о товаре;
* **getCardList** - получает список товаров;
* **orderCards** - отправляет данные заказа и получает результат

### Order.ts
Управляет данными о способе оплаты и адресе доставки в формах заказа
Класс **Order** содержит:

* **set address** - устанавливает адрес доставки;
* **set card** - устанавливает безналичный метод оплаты;
* **set cash** - устанавливает наличный метод оплаты

### Page.ts
Управляет основными элементами страницы
Класс **Page** содержит:
* **set counter** - счетчик товаров в корзине;
* **set catalog** - каталог товаров;
* **set locked** - блокирует страницу

### Success.ts 
Отображение успешного оформления заказа
Класс **Success** содержит:

* **set total** - устанавливает общую стоимость заказа

### Card.ts
Отображает информацию карточки товара в разных состояниях - состояние карточки в каталоге, в корзине и ее превью
Класс **Card** содержит:

* **set id** и **get id** - сеттер и геттер для ID;
* **set title** и **get title** - сеттер и геттер для названия;
* **set image** - сеттер для картинки;
* **set price** и **get price** - сеттер и геттер для цены;
* **set button** - сеттер для кнопки;
* **toggleButton** - переключатель состояния кнопки;
* **set category** и **get category** - сеттер и геттер для категории;
* **set selected** - сеттер для определения выбран ли товар

Класс **BasketCard** содержит:

* **set title** - сеттер для названия;
* **set index** - сеттер для индекса;
* **set price** - сеттер для цены

Класс **CardPreview** содержит:

* **set description** - сеттер для описания товара

## Интерфесы
* **ICardItem**
Интерфейс данных карточки товара
*  **IAppState**
Интерфейс общего состояния страницы
* **IOrderForm**
Интерфейс контактных данных заказа
* **IOrder**
Интерфейс данных заказа
* **IOrderResult**
Интерфейс результат оформления заказа
* **IBasketView**
Интерфейс содержимого корзины
* **ILarekApi**
Интерфейс получаемых и отправляемых данных
* **ICardActions**
Действие клика в карточке
* **ISuccessActions**
Действие клика в окне упешной оплаты
* **ISuccess**
Интерфейс успешной оплаты
* **IFormState**
Интерфейс состояния формы
* **IModalData**
Интерфейс типа данных модального окна
* **IPage**
Интерфейс данных страницы
* **ICatalog**
Интерфейс данных каталога
* **IBasketCard**
Интерфейс товара в корзине

## Используемые константы
```
export const API_URL = `${process.env.API_ORIGIN}/api/weblarek`;
export const CDN_URL = `${process.env.API_ORIGIN}/content/weblarek`;

export const settings = {
};

export const cardCategory: {[key: string]: string} = {
  'софт-скилл': 'card__category_soft',
  'хард-скилл': 'card__category_hard',
  'дополнительное': 'card__category_additionl',
  'кнопка': 'card__category_button',
  'другое': 'card__category_other'
}
```